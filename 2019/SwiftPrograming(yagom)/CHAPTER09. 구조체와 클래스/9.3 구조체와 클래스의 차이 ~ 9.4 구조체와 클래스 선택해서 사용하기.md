# 9.3 구조체와 클래스의 차이

##### 공통점

- 값을 저장하기 위해 프로퍼티를 정의할 수 있다.
- 기능 실행을 위해 메서드를 정의할 수 있다.
- 서브스크립트 문법을 통해 구조체 또는 클래스가 같은 값에 접근하도록 서브스크립트를 정의할 수 있다. 
- 초기화될 때의 상태를 지정하기 위해 이니셜라이저를 정의할 수 있다.
- 초기구현과 더불어 새로운 기능 추가를 위해 익스텐션을 통해 확장할 수 있다.
- 특정 기능을 실행하기 위해 특정 프로토콜을 준수할 수 있다.

##### 차이점

- 구조체는 상속할 수 없다.
- 타입캐스팅은 클래스의 인스턴스에만 허용된다.
- 디이니셜라이저는 클래스의 인스턴스에만 활용할 수 있다.
- 참조 횟수 계산은 클래스의 인스턴스에만 적용된다.

#### 9.3.1 값 타입과 참조 타입

값 타입과 참조 타입의 가장 큰 차이는 '무엇이 전달되느냐'이다. 예를 들어 어떤 함수의 전달인자로 값 타입의 값을 넘긴다면 **전달될 값이 복사**되어 전달된다. 그러나 참조 타입이 전달인자로 전달될 때는 값을 복사하지 않고 **참조(주소)가 전달**된다. 참조라는 것은 C언어 등에서 사용되는 포인터와 매우 유사한 개념이다. 그러나 참조라는 것을 표현해주기 위해 애스터리스크를 사용하지는 않는다. 

클래스의 인스턴스끼리 참조가 같은지 확인할 때는 **식별 연산자**를 사용한다.

-  === : 참조가 같은 것을 식별
- !== : 참조가 같지 않은 것을 식별

#### 9.3.2 스위프트의 기본 데이터 타입은 모두 구조체

스위프트의 기본 데이터 타입은 구조체로 구현되어있다. 이는 기본 데이터 타입이 모두 값 타입이라는 뜻이다. 전달인자를 통해 데이터를 전달하면 모두 값이 복사되어 전달될 뿐, 함수 내부에서 아무리 전달된 값을 변경해도 기존의 변수나 상수에는 전혀 영향을 미치지 못한다. 이런 점을 더욱 확실히 하기위해 스위프트의 전달인자는 모두 상수로 취급되어 전달되는 것일지도 모른다. 

# 9.4 구조체와 클래스 선택해서 사용하기

구조체와 클래스는 생긴 것은 비슷하지만 용도는 다르다. 프로젝트의 성격에 따라, 데이터의 활용도에 따라, 특정 타입을 구현할 때 구조체와 클래스 둘 중 하나를 선택해서 사용해야 한다. 

애플은 가이드라인에서 다음 조건 중 하나 이상에 해당한다면 구조체를 사용하는 것을 권장한다.

- 연관된 간단한 값의 집합을 캡슐화하는 것만이 목적일 때
- 캡슐화한 값을 참조하는 것 보다 복사하는 것이 합당할 때
- 구조체에 저장된 프로퍼티가 값 타입이며 참조하는 것보다 복사하는 것이 합당할 때
- 다른 타입으로부터 상속받거나 자신을 상속할 필요가 없을 때

이런 몇 가지 상황을 제외하면 클래스로 정의하여 사용한다. 

> 똑똑한 스위프트의 복사 처리
>
> > 스위프트의 기본 데이터 타입이 모두 구조체라서 다수의 배열 또는 딕셔너리 등의 데이터를 복사하고 이용할 때 메모리를 비효율적으로 사용한다고 오해할 수 있다. 그렇지만 스위프트는 꼭 필요한 경우에만 '진짜 복사'를 한다. 컴파일러가 판단해서 꼭 복사를 할 필요가 없을 경우 요소를 많이 갖는 큰 배열을 함수의 전달인자로 넘겨준다고 해서 꼭 모든 값을 메모리의 다른 공간에 복사해 넣지 않을 수도 있다는 뜻이다. 스위프트가 적절히 알아서 효율적으로 처리해줄 것이다.
# 23 프로토콜 지향 프로그래밍

애플은 2015년 6월, WWDC에서 스위프트 버전 2.0을 발표하면서 스위프트는 프로토콜 지향 언어라고 말했다. 

Objective-C 등 객체지향 프로그래밍 패러다임에 기반을 둔 언어는 대부분 클래스의 상속을 사용해 타입에 공통된 기능을 구현한다. 그런데 스위프트의 표준 라이브러리에서 타입과 관련된 것을 살펴보면 대부분이 구조체로 구현되어 있다. 클래스로 구현된 타입은 별로 없고, 대부분 구조체로 기본 타입이 구현되어 있다. 상속도 되지 않는 구조체로 어떻게 그렇게 다양한 공통 기능을 가질 수 있는 이유는 프로토콜과 익스텐션, 제네릭에 있다. 



# 23.1 프로토콜 초기구현

프로토콜을 정의할 때는 그 프로토콜을 채택한 타입에서 구현해주어야 하는 프로토콜의 요구사항을 구현할 수 없다. 단지 요구사항을 정의만 할 수 있을 뿐이다. 그러나 프로토콜의 익스텐션에는 프로토콜이 요구하는 기능을 실제로 구현해줄 수 있다. 다만 익스텐션에는 저장 프로퍼티를 구현할 수 없으므로 저장 프로퍼티는 각각의 타입에서 직접 구현해야 한다. 이렇게 프로토콜과 익스텐션을 결합하면 코드의 재사용성이 월등히 증가한다.

이처럼 프로토콜의 요구사항을 익스텐션을 통해 구현하는 것을 **프로토콜 초기구현**이라고 한다. 그런데 만약 프로토콜의 익스텐션에서 구현한 기능을 사용하지 않고 타입의 특성에 따라 조금 변경해서 구현하고 싶다면 재정의하면 된다. 

사실 재정의라고 할 수는 없다. 이미 프로토콜을 준수하는 타입의 메서드를 호출하는 것이기 때문이다. 특정 프로토콜을 준수하는 타입에 프로토콜의 요구사항을 찾아보고 이미 구현되어 있다면 그 기능을 호출하고, 그렇지 않다면 프로토콜 초기구현의 기능을 호출한다. 여기에 제네릭까지 더한다면 코드의 재사용성은 훨씬 더 좋아질 것이다. 

스위프트의 클래스는 다중상속을 지원하지 않으므로 부모클래스의 기능으로 부족하다면 자식클래스에서 다시 구현해야 하지만, 프로토콜 초기구현을 한 프로토콜을 채택했다면 상속도 추가 구현도 필요 없다. 게다가 상속을 지원하지 않는 값 타입인 구조체와 열거형도 상속을 받지 못한다고 아쉬워할 필요가 없다. 초기구현을 한 프로토콜만 채택한다면 기능이야 얼마든지 추가할 수 있기 때문이다.

이처럼 프로토콜 초기구현을 통해 기능을 구현한다면 프로토콜 채택만으로 타입에 기능을 추가해 사용할 수 있다. 이것이 프로토콜 지향 프로그래밍의 핵심 콘셉트 중 하나이다. 
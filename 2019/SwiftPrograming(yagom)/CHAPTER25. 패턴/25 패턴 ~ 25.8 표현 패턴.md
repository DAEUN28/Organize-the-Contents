# 25 패턴 

스위프트에는 문법에 응용할 수 있는 다양한 종류의 패턴이 있다. 여러 패턴을 잘 숙지해두면 스위프트의 코드의 양을 줄이는 효과는 물론, 스위프트 문법을 좀 더 잘 활용할 수 있다. 

**패턴** : 단독 또는 복합 값의 구조를 나타내는 것

**패턴 매칭** : 코드에서 어떤 패턴의 형태를 찾아내는 행위

쉽게 말하자면 이러이러한 것을 표혆고 싶다면 이러이러한 패턴을 통해 표현하면 된다라고 이해하면 된다. 대부분의 패턴은 switch, if, guard, for 등의 키워드와 아주 친하며 두 개 이상의 키워드가 합을 이뤄 동작한다. 대부분의 패턴은 switch 구문에서 강력한 힘을 발휘한다. 스위프트의 패턴은 다음 두 종류로 크게 나뉜다.

- 값을 해체(추출)하거나 무시하는 패턴 : 와일드카드 패턴, 식별자 패턴, 값 바인딩 패턴, 튜플 패턴

- 패턴 매칭을 위한 패턴 : 열거형 케이스 패턴, 옵셔널 패턴, 표현 패턴, 타입캐스팅 패턴

  

# 25.1 와일드카드 패턴 

와일드카드 식별자를 사용한다는 것 :  이 자리에 올 것이 무엇이든간에 상관하지 마라

즉, 와일드카드 식별자가 위치한 곳의 값은 무시한다. 다음코드는 와일드카드 패턴을 사용하는 예시이다. 

```swift
let string: String = "ABC"

switch string {
  // ABC -> 어떤 값이 와도 상관없기에 항상 실행된다. 
  case _ : print(String)
}

let optionalString: String? = "ABC"

switch optionalString {
  // optionalString이 Optional("ABC")일 때만 실행된다.
  case "ABC"? : print(optionalString)
  
  // optionalString이 Optional("ABC") 외의 값이 있을 때만 실행된다.
  case _?: print("Has value, but not ABC")
  
  // 값이 없을 때 실행된다.
  case nil : print("nil")
} // Optional("ABC")

let yagom = ("yagom", 99, "Male")

switch yagom {
  // 첫 번쨰 요소가 "yagom"일 때만 실행된다.
  case ("yagom", _, _): print("Hello yagom!!!")
  
  // 그 외 언제든지 실행된다.
  case (_, _, _) : print("Who cares~")
} // Hello yagom!!!

for _ in 0..<2 {
  print("Hello")
}
// Hello
// Hello
```



# 25.2 식별자 패턴

**식별자 패턴** :  변수 또는 상수의 이름에 알맞는 값과 어떤 값과 매치시키는 패턴을 말한다.

이 패턴은 너무나 당연히 써왔던 모습이기 때문에 패턴이라고 하기에도 민망할 수 있다. 경우에 따라서 식별자 패턴은 값 바인딩 패턴의 일종이라고 할 수도 있다.



# 25.3 값 바인딩 패턴

**값 바인딩 패턴** : 변수 또는 상수의 이름에 매치된 값을 바인딩하는 것이다. 

값 바인딩 패턴의 일종인 식별자 패턴은 매칭되는 값을 새로운 이름의 변수 또는 상수에 바인딩한다. 예를 들어 튜플의 요소를 해체하여 그에 응하는 식별자 패턴에 각각의 요소 값을 바인딩하는 것이다.



# 25.4 튜플 패턴

**튜플 패턴** : 소괄호 내에 쉼표로 분리하는 리스트

튜플 패턴은 그에 상응하는 튜플 타입과 값을 매치한다. 튜플 패턴을 for-in 구문 또는 변수나 상수 선언에서 사용한다면 와일드카드 패턴, 식별자 패턴, 옵셔널 패턴, 또다른 튜플 패턴 등을 함께 사용할 수 있다.

```swift
let (a): Int = 2
print(a) // 2

let (x, y): (Int, Int) = (1, 2)
print(x) // 1
print(y) // 2
```



# 25.5 열거형 케이스 패턴

**열거형 케이스 패턴**: 값을 열거형 타입의 case와 매치시킨다. 

열거형 케이스 패턴은 switch 구문의 case 레이블과 if, while, guard, for-in 구문의 case 조건에서 볼 수 있다. 만약 연관 값이 있는 열거형 케이스와 매치하려고 한다면 열거형 케이스 패턴에는 반드시 튜플 패턴이 함께해야 한다.



# 25.6 옵셔널 패턴

**옵셔널 패턴** : 옵셔널 또는 암시적 추출 옵셔널 열거형에 감싸져 있는 값을 매치시킬 때 사용

옵셔널 패턴은 식별자 패턴 뒤에 물음표를 넣어 표기하며 열거형 케이스 패턴과 동일한 위치에 자리한다. 또, 옵셔널 패턴은 옵셔널 값을 저장하는 배열의 for-in 구문을 통한 순환에서 nil이 아닌 값을 찾는 데도 유용하게 사용한다.



# 25.7 타입캐스팅 패턴

타입캐스팅 패턴에는 is 패턴과 as 패턴이 있다. is 패턴은 switch의 case 레이블에서만 사용할 수 있다. is 패턴은 is (TYPE_NAME)과 같이 쓸 수 있고 as 패턴은 SomePattern as (TYPE_NAME)과 같이 쓸 수 있다.

이름에서부터 알 수 있듯이 타입캐스팅 패턴은 타입캐스팅을 하거나 타입을 매치시킨다. is 패턴은 프로그램 실행 중에 값의 타입이 is 우측에 쓰여진 타입 또는 그 타입의 자식클래스 타입이면 값과 매치시킨다. is 패턴은 타입캐스팅에 사용되는 as 연산자와 비슷한 역할을 하지만 반환된 결괏값은 신경쓰지 않는다는 차이가 있다. 

as 패턴은 프로그램 실행 중에 값의 타입이 as 우측에 쓰여진 타입 또는 그 타입의 자식클래스 타입이면 값과 매치시킨다. 만약 매치된다면 매치된 값의 타입은 as 패턴이 원하는 타입으로 캐스팅된다. 



# 25.8 표현 패턴

**표현 패턴** : 표현식의 값을 평가한 겨로가를 이용하는 것, switch 구문의 case 레이블에서만 사용할 수 있다.

표현 패턴은 스위프트의 표준 라이브러리의 패턴 연산자인 ~= 연산자의 연산 결과가 true를 반환하면 매치시킨다. ~=연산자는 같은 타입의 두 값을 비교할 때 == 연산자를 사용한다. 표현 패턴은 정숫값과 정수의 범위를 나타내는 Range 객체와 매치시킬 수도 있다.

표현 패턴은 매우 유용한 패턴 중 하나이다. 사실 모든 패턴 중에 최고봉이며 궁극의 패턴 매칭을 이루어 낼 수 있는 패턴이라고 할 수 있다. 그 이유는 ~= 연산자를 중복 정의하거나 ~= 연산자를 새로 정의하거나 또는 자신이 만든 타입에 ~= 연산자를 구현해준다면 자신이 원하는대로 패턴을 완성시킬 수 있기 때문이다. 거기에 더불어 제네릭까지 추가하면 활용도는 더욱 높아진다.


# 22 제네릭

제네릭은 스위프트의 강력한 기능 중 하나이다. 제네릭을 이용해 코드를 구현하면 어떤 타입에도 유연하게 대응할 수 있다. 또한 제네릭으로 구현한 기능과 타입은 재사용하기도 쉽고, 코드의 중복을 줄일 수 있기에 깔끔하고 추상적인 표현이 가능하다. 스위프트 표준 라이브러리 또한 수많은 제네릭 코드로 구성되어 있다. 

제네릭을 사용하고자 할 때는 제네릭이 필요한 타입 또는 메서드의 이름 뒤의 홀화살괄호 기호 사이에 제네릭을 위한 타입 매개변수를 써주어 제네릭을 사용할 것임을 표시한다.

```swift
제네릭을사용하고자하는타입이름 <타입매개변수>
제네릭을사용하고자하는메서드이름 <타입매개변수> (함수의매개변수...)
```



# 22.1 제네릭 함수

제네릭 함수는 실제 타입 이름을 써주는 대신에 플레이스홀더를 사용한다. 플레이스홀더는 타입의 종류를 알려주지 않지만 말 그대로 어떤 타입이라는 것은 알려준다. 플레이스홀더의 실제 타입은 함수가 호출되는 그 순간 결정된다. 

제네릭 함수의 플레이스 홀더를 지정하는 방법은 함수 이름 오른쪽의 홀화살괄호 기호 안쪽에 플레이스홀더 이름들을 나열하는 것이다. 플레이스홀더는 타입 매개변수의 한 예로 들 수 있다. 타입 매개변수는 플레이스홀더 타입의 이름을 지정하고 명시하는 역할을 하며, 함수의 이름 뒤 홀화살괄호 기호 안쪽에 위치한다. 

타입 매개변수를 지정해주면 이를 함수의 매개변수의 타입으로 사용할 수 있다. 또는 함수의 반환 타입으로 사용할 수도 있으며, 함수 내부 변수의 타입 지정을 위해 사용할 수도 있다. 각각의 경우 타입 매개변수는 함수를 호출할 때마다 실제 타입으로 치환된다. 하나의 타입 매개변수를 갖지 않고 여러 개의 타입 매개변수를 갖고 싶다면 홀화살괄호 기호 안쪽에 쉼표로 분리한 여러 개의 타입 매개변수를 지정해줄 수 있다. 

타입 매개변수 대부분은 의미있는 이름을 갖게 되는 경우가 많다. 의미있는 이름으로 타입 매개변수의 이름을 지정해주면 제네릭 타입 및 제네릭 함수와 타입 매개변수와의 관계를 조금 더 명확히 표현해줄 수 있다. 그러나 특별히 관계의 의미를 이름으로 표현하기 어려울 때는 관용적으로 대문자 한 글자로 표현한다. 

> 타입 매개변수 이름은 타입 이름이기도 하므로 대문자 카멜케이스를 사용하여 표현한다.



# 22.2 제네릭 타입

제네릭 타입을 구현하면 사용자정의 타입인 구조체, 클래스, 열거형 등이 어떤 타입과도 연관되어 동작할 수 있다. 제네릭을 사용하면 Any타입으로 정의하는 것보다 제네릭을 사용했을 때 훨씬 유연하고 광범위하게 사용할 수 있으며, 그 타입에만 동작하도록 제한할 수 있어 더욱 안전하고 의도한 대로 기능을 사용핟록 유도할 수 있다.



# 22.3 제네릭 타입 확장

만약 익스텐션을 통해 제네릭을 사용하는 타입에 기능을 추가하고자 한다면 익스텐션 정의에 타입 매개변수를 명시하지 않아야 한다. 대신 원래의 제네릭 정의에 명시한 타입 매개변수를 익스텐션에서 사용할 수 있다. 



# 22.4 타입 제약

타입 제약은 타입 매개변수가 가져야 할 제약사항을 지정할 수 있는 방법이다. 예를 들어 타입 매개변수 자리에 사용할 실제 타입이 특정 클래스를 상속 받은 타입이어야 한다든지, 특정 프로토콜을 준수하는 타입이어야 한다는 등의 제약을 줄 수 있다는 뜻이다. **타입 제약은 클래스 타입 또는 프로토콜로만 줄 수 있다.** 즉 열거형, 구조체 등의 타입은 타입 제약의 타입으로 사용할 수 없다. 

제네릭 타입에 제약을 주고 싶으면 타입 매개변수 뒤에 콜론을 붙인 후 원하는 클래스 타입 또는 프로토콜을 명시하면 된다. 여러 제약을 추가하고 싶다면 콤마로 구분해주는 것이 아니라 where 절을 사용할 수 있다. 만약 타입 매개변수가 두 개 이상인 경우 두 타입 매개변수마다 제약조건을 달리해서 구현해줄 수도 있다.



# 22.5 프로토콜의 연관 타입

프로토콜을 정의할 때 연관 타입을 함꼐 정의하면 유용할 때가 있다. 연관 타입은 프로토콜에서 사용할 수 있는 플레이스홀더 이름이다. 즉, 제네릭에서는 어떤 타입이 들어올지 모를 때, 타입 매개변수를 통해 '종류를 알 수 없지만, 어떤 타입이 여기에 쓰일 것이다'라고 표현해주었다면 연관 타입은 타입 매개변수의 그 역할을 프로토콜에서 실행할 수 있도록 만들어진 기능이다. 

이는 제네릭의 타입 매개변수와 유사한 기능으로, 프로토콜 정의 내부에서 사용할 타입이 '그 어떤 것이어도 상관없지만, 하나의 타입임은 분명하다'라는 의미이다. 프로토콜의 연관 타입에 대응하여 실제 타입을 사용할 수도 있지만, 제네릭 타입에서는 연관 타입과 타입 매개변수를 대응시킬 수도 있다. 



# 22.6 제네릭 서브스크립트

서브스크립트도 제네릭을 활용하여 타입에 큰 제한 없이 유연하게 구현할 수 있다. 물론 타입 제약을 사용하여 제네릭을 활용하는 타입에 제약을 줄 수도 있다. 